<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:BereitschaftsPlaner.Avalonia.ViewModels"
        x:Class="BereitschaftsPlaner.Avalonia.Views.ImportPreviewWindow"
        Title="Import-Vorschau"
        Width="900" Height="600"
        MinWidth="700" MinHeight="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource BackgroundBrush}">

    <Design.DataContext>
        <vm:ImportPreviewViewModel/>
    </Design.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Info Header -->
        <Border Grid.Row="0"
                Padding="15"
                CornerRadius="8"
                Margin="0,0,0,15">
            <Border.Background>
                <SolidColorBrush Color="{Binding StatusColor}"/>
            </Border.Background>
            <TextBlock Text="{Binding StatusMessage}"
                       FontSize="14"
                       FontWeight="Bold"
                       Foreground="White"/>
        </Border>

        <!-- Data Preview (DataGrid) -->
        <Border Grid.Row="1"
                BorderBrush="#DDDDDD"
                BorderThickness="1"
                CornerRadius="8"
                Margin="0,0,0,15">
            <DataGrid ItemsSource="{Binding PreviewData}"
                      IsReadOnly="True"
                      GridLinesVisibility="All"
                      BorderThickness="0"
                      AutoGenerateColumns="True"
                      CanUserResizeColumns="True"
                      CanUserSortColumns="True">
                <DataGrid.Styles>
                    <Style Selector="DataGridRow">
                        <Setter Property="Background" Value="White"/>
                    </Style>
                    <Style Selector="DataGridRow:nth-child(2n)">
                        <Setter Property="Background" Value="#F9F9F9"/>
                    </Style>
                    <Style Selector="DataGridColumnHeader">
                        <Setter Property="Background" Value="#F0F0F0"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="8"/>
                    </Style>
                </DataGrid.Styles>
            </DataGrid>
        </Border>

        <!-- Error Details (if any) -->
        <Border Grid.Row="2"
                IsVisible="{Binding HasErrors}"
                Background="#FFF9E6"
                BorderBrush="#FFB800"
                BorderThickness="1"
                CornerRadius="8"
                Padding="15"
                Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="âš  Fehler-Details:"
                           FontWeight="Bold"
                           FontSize="12"
                           Foreground="#CC6600"
                           Margin="0,0,0,10"/>
                <TextBox Text="{Binding ErrorDetails}"
                         IsReadOnly="True"
                         TextWrapping="Wrap"
                         MaxHeight="100"
                         BorderThickness="0"
                         Background="Transparent"
                         Foreground="#CC6600"/>
            </StackPanel>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="10">
            <Button Content="Abbrechen"
                    Width="140"
                    Height="35"
                    Background="#FF6B6B"
                    Foreground="White"
                    FontWeight="SemiBold"
                    CornerRadius="8"
                    Command="{Binding CancelCommand}"/>
            <Button Content="Importieren"
                    Width="140"
                    Height="35"
                    Background="{StaticResource YunexGreen}"
                    Foreground="White"
                    FontWeight="SemiBold"
                    CornerRadius="8"
                    IsEnabled="{Binding CanImport}"
                    Command="{Binding ConfirmCommand}"/>
        </StackPanel>
    </Grid>
</Window>
